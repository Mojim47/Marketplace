# Run tests before push
# Quick unblock path (2026): allow skipping infra-heavy suites via env flag
#   SKIP_ORDER_LOCK=1 git push   -> skips orders-lock.integration
# TODO (@team, <24h>): remove the skip flag once Redis/Postgres infra is available locally/CI

TEST_ARGS=""
if [ "${SKIP_ORDER_LOCK}" = "1" ]; then
  TEST_ARGS="${TEST_ARGS} --exclude=\"**/orders-lock.integration.test.ts\""
fi

pnpm test:unit -- ${TEST_ARGS}
