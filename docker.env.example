# Docker deployment environment (required)
# Fill these before running docker compose.

# Core
NODE_ENV=production

# Image pins (override as needed)
POSTGRES_IMAGE=postgres:16.4-alpine@sha256:5660c2cbfea50c7a9127d17dc4e48543eedd3d7a41a595a2dfa572471e37e64c
DRAGONFLY_IMAGE=docker.dragonflydb.io/dragonflydb/dragonfly:v1.15.1@sha256:48d7f1679a895702262808c83689df94b14d40c07401fad90723ad164d271150
MINIO_IMAGE=minio/minio:RELEASE.2024-12-18T13-15-44Z@sha256:1dce27c494a16bae114774f1cec295493f3613142713130c2d22dd5696be6ad3

# Resource governance (prod profile)
POSTGRES_CPU_LIMIT=1.0
POSTGRES_MEM_LIMIT=1024M
POSTGRES_CPU_RESERVATION=0.5
POSTGRES_MEM_RESERVATION=512M

REDIS_CPU_LIMIT=1.0
REDIS_MEM_LIMIT=512M
REDIS_CPU_RESERVATION=0.25
REDIS_MEM_RESERVATION=256M

MINIO_CPU_LIMIT=1.0
MINIO_MEM_LIMIT=1024M
MINIO_CPU_RESERVATION=0.5
MINIO_MEM_RESERVATION=512M

API_CPU_LIMIT=1.0
API_MEM_LIMIT=1024M
API_CPU_RESERVATION=0.5
API_MEM_RESERVATION=512M

WEB_CPU_LIMIT=1.0
WEB_MEM_LIMIT=1024M
WEB_CPU_RESERVATION=0.5
WEB_MEM_RESERVATION=512M

ADMIN_CPU_LIMIT=0.5
ADMIN_MEM_LIMIT=512M
ADMIN_CPU_RESERVATION=0.25
ADMIN_MEM_RESERVATION=256M

WORKER_CPU_LIMIT=1.0
WORKER_MEM_LIMIT=1024M
WORKER_CPU_RESERVATION=0.5
WORKER_MEM_RESERVATION=512M

# Database
DB_USER=nextgen
DB_PASSWORD=change_me_strong_db_password
DB_NAME=nextgen_marketplace
DATABASE_URL=postgresql://nextgen:change_me_strong_db_password@postgres:5432/nextgen_marketplace?schema=public

# Redis (Dragonfly)
REDIS_PASSWORD=change_me_strong_redis_password
REDIS_URL=redis://:change_me_strong_redis_password@redis:6379/0

# MinIO
MINIO_ROOT_USER=nextgen
MINIO_ROOT_PASSWORD=change_me_strong_minio_password
MINIO_BUCKET_UPLOADS=uploads
MINIO_PUBLIC_URL=http://localhost:9000

# API
CORS_ORIGINS=http://localhost:3000,http://localhost:3003
JWT_SECRET=change_me_strong_jwt_secret_64_chars_min
JWT_REFRESH_SECRET=change_me_strong_jwt_refresh_secret_64_chars_min
JWT_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----\nREPLACE_WITH_REAL_KEY\n-----END RSA PRIVATE KEY-----
JWT_PUBLIC_KEY=-----BEGIN RSA PUBLIC KEY-----\nREPLACE_WITH_REAL_KEY\n-----END RSA PUBLIC KEY-----
TOTP_ENCRYPTION_KEY=change_me_strong_totp_key_32_chars_min
SESSION_SECRET=change_me_strong_session_secret_32_chars_min

# Web
NEXT_PUBLIC_API_BASE=http://localhost:3001
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Admin
ADMIN_API_PROXY_TARGET=http://localhost:3001
