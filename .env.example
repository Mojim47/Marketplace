# ═══════════════════════════════════════════════════════════════════════════
# NextGen Marketplace - Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Database Configuration
DATABASE_URL="postgresql://nextgen:VAULT_SECRET@localhost:5432/nextgen_marketplace?schema=public"
POSTGRES_USER=nextgen
POSTGRES_PASSWORD=VAULT_SECRET
POSTGRES_DB=nextgen_marketplace

# KeyDB (Redis) Configuration
KEYDB_URL="redis://localhost:6379"
KEYDB_PASSWORD=VAULT_SECRET

# ClickHouse Configuration
CLICKHOUSE_URL="http://localhost:8123"
CLICKHOUSE_DATABASE=nextgen_analytics
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=VAULT_SECRET

# Application Configuration
NODE_ENV=development
PORT=3001
API_VERSION=v3
FRONTEND_URL=http://localhost:3000
ADMIN_URL=http://localhost:3002
AUTH_MODE=mock
ADMIN_AUTH_ENDPOINT=
ALLOW_AUTH_MOCK=false

# AI Embedding Configuration
AI_EMBEDDING_ENABLED=true
AI_EMBEDDING_MODEL_PATH=public/models/ai/all-MiniLM-L6-v2.onnx
AI_EMBEDDING_TOKENIZER_PATH=public/models/ai/tokenizer.json
AI_EMBEDDING_TOKENIZER_CONFIG_PATH=public/models/ai/tokenizer_config.json
AI_EMBEDDING_MAX_LEN=128

# JWT Configuration
JWT_SECRET=VAULT_SECRET
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=VAULT_SECRET
JWT_REFRESH_EXPIRES_IN=7d

# Company Information
COMPANY_NAME="NextGen Marketplace"
COMPANY_TAX_ID=1234567890
COMPANY_ECONOMIC_CODE=123456789012345
COMPANY_POSTAL_CODE=1234567890
COMPANY_ADDRESS="تهران، خیابان ولیعصر، پلاک ۱۲۳"
COMPANY_PHONE="+98-21-12345678"

# ═══════════════════════════════════════════════════════════════════════════
# ZarinPal Payment Gateway Configuration
# ═══════════════════════════════════════════════════════════════════════════

# ZarinPal Merchant Configuration
ZARINPAL_MERCHANT_ID=VAULT_SECRET
ZARINPAL_SANDBOX=true
ZARINPAL_CALLBACK_URL=http://localhost:3001/api/v3/payments/zarinpal/callback
ZARINPAL_WEBHOOK_SECRET=VAULT_SECRET

# ZarinPal API Configuration
ZARINPAL_API_VERSION=v4
ZARINPAL_TIMEOUT=30000

# ═══════════════════════════════════════════════════════════════════════════
# Moodian Tax Authority Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Moodian Authentication
MOODIAN_CLIENT_ID=VAULT_SECRET
MOODIAN_PRIVATE_KEY=VAULT_SECRET
MOODIAN_PUBLIC_KEY=VAULT_SECRET
MOODIAN_TAX_ORG_PUBLIC_KEY=VAULT_SECRET

# Moodian Configuration
MOODIAN_MEMORY_ID=VAULT_SECRET
MOODIAN_SANDBOX=true
MOODIAN_BASE_URL=https://sandboxrc.tax.gov.ir/req/api/self-tsp
MOODIAN_TIMEOUT=60000

# ═══════════════════════════════════════════════════════════════════════════
# Monitoring & Observability Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Grafana Configuration
GRAFANA_PASSWORD=VAULT_SECRET
GRAFANA_URL=http://localhost:3000

# Prometheus Configuration
PROMETHEUS_URL=http://localhost:9090
PROMETHEUS_RETENTION=30d

# AlertManager Configuration
ALERTMANAGER_URL=http://localhost:9093
ALERTMANAGER_WEBHOOK=http://localhost:5001/webhook
ENABLE_EMAIL_ALERTS=false

# Email Alerts Configuration (if enabled)
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USER=alerts@nextgen-marketplace.com
SMTP_PASSWORD=VAULT_SECRET
FROM_EMAIL=alerts@nextgen-marketplace.com
TO_EMAIL=admin@nextgen-marketplace.com

# ═══════════════════════════════════════════════════════════════════════════
# Security Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Rate Limiting
RATE_LIMIT_GLOBAL=1000
RATE_LIMIT_INVENTORY=100
RATE_LIMIT_BIDDING=50
RATE_LIMIT_BULK=10

# Security Headers
CORS_ORIGIN=http://localhost:3000,http://localhost:3002
CORS_CREDENTIALS=true
CSP_API_DOMAIN=api.example.com
CSP_CDN_DOMAIN=cdn.example.com
CSP_ANALYTICS_DOMAIN=analytics.example.com

# Validation Shield
VALIDATION_MAX_STRING_LENGTH=10000
VALIDATION_MAX_ARRAY_LENGTH=1000
VALIDATION_MAX_OBJECT_DEPTH=10

# ═══════════════════════════════════════════════════════════════════════════
# File Storage Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Local Storage
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_EXTENSIONS=.jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.glb,.usdz

# AWS S3 Configuration (for production)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=VAULT_SECRET
AWS_SECRET_ACCESS_KEY=VAULT_SECRET
AWS_S3_BUCKET=nextgen-marketplace-files

# ═══════════════════════════════════════════════════════════════════════════
# Localization Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Default Language & Locale
DEFAULT_LANGUAGE=fa
DEFAULT_LOCALE=fa-IR
SUPPORTED_LANGUAGES=fa,en
TIMEZONE=Asia/Tehran

# Persian/Jalali Configuration
JALALI_CALENDAR=true
PERSIAN_NUMBERS=true

# ═══════════════════════════════════════════════════════════════════════════
# Development & Testing Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Development Mode
DEBUG=true
LOG_LEVEL=debug
ENABLE_SWAGGER=true

# Testing Configuration
TEST_DATABASE_URL="postgresql://nextgen:VAULT_SECRET@localhost:5432/nextgen_marketplace_test?schema=public"
TEST_TIMEOUT=30000

# Mock Services (for development)
MOCK_ZARINPAL=false
MOCK_MOODIAN=false
MOCK_SMS=true
MOCK_EMAIL=true

# ═══════════════════════════════════════════════════════════════════════════
# Performance Configuration
# ═══════════════════════════════════════════════════════════════════════════

# Cache Configuration
CACHE_TTL_DEFAULT=300
CACHE_TTL_PRODUCTS=600
CACHE_TTL_ORDERS=60
CACHE_TTL_ANALYTICS=300

# Database Connection Pool
DATABASE_POOL_SIZE=10
DATABASE_POOL_TIMEOUT=30000

# Query Performance
SLOW_QUERY_THRESHOLD=100
ENABLE_QUERY_LOGGING=true

# ═══════════════════════════════════════════════════════════════════════════
# Production Configuration (Override in production)
# ═══════════════════════════════════════════════════════════════════════════

# Production URLs
# FRONTEND_URL=https://marketplace.example.com
# ADMIN_URL=https://admin.marketplace.example.com
# API_URL=https://api.marketplace.example.com

# Production Database
# DATABASE_URL="postgresql://user:password@host:5432/database?sslmode=require"

# Production ZarinPal
# ZARINPAL_SANDBOX=false
# ZARINPAL_CALLBACK_URL=https://api.marketplace.example.com/api/v3/payments/zarinpal/callback

# Production Moodian
# MOODIAN_SANDBOX=false
# MOODIAN_BASE_URL=https://tp.tax.gov.ir/req/api/self-tsp

# Production Security
# JWT_SECRET=your-production-jwt-secret-256-bits-minimum
# CORS_ORIGIN=https://marketplace.example.com,https://admin.marketplace.example.com

# Production Monitoring
# ENABLE_EMAIL_ALERTS=true
# SMTP_HOST=smtp.example.com
# SMTP_USER=alerts@marketplace.example.com
