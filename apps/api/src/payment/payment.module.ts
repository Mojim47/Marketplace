/**
 * ???????????????????????????????????????????????????????????????????????????
 * NextGen Marketplace - Payment Module
 * ???????????????????????????????????????????????????????????????????????????
 *
 * NestJS module for payment operations.
 * Integrates ZarinPal payment gateway with audit logging.
 *
 * Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 7.2
 */

import { Module } from '@nestjs/common';
import { CircuitBreakerService } from '@nextgen/resilience';
import { DatabaseModule } from '../database/database.module';
import { PaymentAuditService } from './payment-audit.service';
import { PaymentSecurityService } from './payment-security.service';
import { PaymentController } from './payment.controller';
import { PAYMENT_AUDIT_SERVICE, PaymentService } from './payment.service';

@Module({
  imports: [DatabaseModule],
  controllers: [PaymentController],
  providers: [
    PaymentService,
    PaymentSecurityService,
    PaymentAuditService,
    CircuitBreakerService,
    {
      provide: PAYMENT_AUDIT_SERVICE,
      useClass: PaymentAuditService,
    },
  ],
  exports: [PaymentService, PaymentSecurityService],
})
export class PaymentModule {}
